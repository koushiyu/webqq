(function(t){function e(e){for(var r,o,s=e[0],c=e[1],u=e[2],p=0,d=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"57b1":function(t,e,n){"use strict";var r=n("aa45"),a=n.n(r);a.a},"589b":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var r=n("589b"),a=n.n(r);a.a},"63ee":function(t,e,n){},"83bf":function(t,e,n){"use strict";var r=n("63ee"),a=n.n(r);a.a},aa45:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,a,i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"left"},[n("div",{attrs:{id:"id"}},[n("draggable",{model:{value:t.list,callback:function(e){t.list=e},expression:"list"}},t._l(t.list,(function(t,e){return n("hello-world",{key:e,attrs:{qqnumber:t}})})),1)],1)]),n("div",{staticClass:"main"},[n("router-view")],1)])},s=[],c=(n("caad"),n("c975"),n("a434"),n("2532"),n("96cf"),n("1da1")),u=n("ef27"),l=n.n(u),p=n("8c13"),d=n.n(p),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{style:t.$route.params.id==t.qqnumber?"background-color:#eee":""},[n("router-link",{attrs:{to:"/friend/"+t.qqnumber}},[n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{height:"70px"}},[n("img",{staticStyle:{width:"70px",height:"70px"},attrs:{src:t.imagesrc,alt:""}})]),n("div",{staticStyle:{width:"100%"}},[n("p",[t._v(" "+t._s(t.realname)+" ")])])])])],1)},m=[],h=n("d4ec"),g=n("bee2"),v=n("262e"),b=n("2caf"),y=n("9ab4"),x=(n("b0c0"),n("82ae")),w=n.n(x),k=localStorage.getItem("config");if(r=a=null,k){var q=JSON.parse(k);r=q.ip,a=q.qq}else window.location.hash="#/config";var O=w.a.create({baseURL:r+"/v1/LuaApiCaller?qq="+a,headers:{"Content-Type":"application/json"}}),j=O;function S(t){return _.apply(this,arguments)}function _(){return _=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),j({method:"POST",data:e,params:{funcname:"SendMsg",timeout:10}}),t.abrupt("return");case 3:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}function C(){return M.apply(this,arguments)}function M(){return M=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:0,t.next=3,j({method:"POST",data:{StartIndex:e},params:{funcname:n.callee.name,timeout:10}});case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t)}))),M.apply(this,arguments)}function P(t){return $.apply(this,arguments)}function $(){return $=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j({method:"POST",data:e,params:{funcname:"GetUserInfo",timeout:10}});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)}))),$.apply(this,arguments)}var U={sendMsg:S,GetQQUserList:C,GetUserInfo:P},T=n("60a3"),R=function(t){Object(v["a"])(n,t);var e=Object(b["a"])(n);function n(){return Object(h["a"])(this,n),e.apply(this,arguments)}return Object(g["a"])(n,[{key:"getVisible",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$data.imagesrc="http://q.qlogo.cn/headimg_dl?dst_uin=".concat(this.$props["qqnumber"],"&spec=640"),t.next=3,U.GetUserInfo({UserID:this.$props["qqnumber"]});case 3:r=t.sent,a=r.data,this.$data.realname=a.nickname;case 6:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),n}(T["c"]);Object(y["a"])([Object(T["b"])()],R.prototype,"qqnumber",void 0),Object(y["a"])([Object(T["d"])("qqnumber")],R.prototype,"getVisible",null),R=Object(y["a"])([Object(T["a"])({data:function(){return{imagesrc:"",realname:""}},mounted:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.$route),t.$data.imagesrc="http://q.qlogo.cn/headimg_dl?dst_uin=".concat(t.$props["qqnumber"],"&spec=640"),e.next=4,U.GetUserInfo({UserID:t.$props["qqnumber"]});case 4:n=e.sent,r=n.data,t.$data.realname=r.nickname;case 7:case"end":return e.stop()}}),e)})))()}})],R);var D=R,I=D,A=(n("83bf"),n("2877")),F=Object(A["a"])(I,f,m,!1,null,"c2384f5c",null),G=F.exports,J=i["default"].extend({data:function(){return{list:new Array}},components:{HelloWorld:G,draggable:d.a},mounted:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=localStorage.getItem("config"),null===n&&t.$router.push("/config"),r=JSON.parse(n),a=r.ip,o=r.qq,i["default"].prototype.socket=i["default"].prototype.socket=l()(a,{transports:["websocket"]}),t.socket.on("connect",(function(){t.socket.emit("GetWebConn",o,(function(t){console.log(t)}))})),t.socket.on("OnEvents",(function(t){})),t.socket.on("OnFriendMsgs",function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(n.CurrentPacket.Data),t.$store.commit("AddfirendMsg",n),r=n.CurrentPacket.Data.FromUin,t.list.includes(r)&&t.list.splice(t.list.indexOf(r),1),t.list.unshift(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.socket.on("OnGroupMsgs",(function(t){}));case 8:case"end":return e.stop()}}),e)})))()},methods:{}}),N=J,E=(n("5c0b"),Object(A["a"])(N,o,s,!1,null,null,null)),V=E.exports,L=n("2f62"),W={activate:void 0,friend:{}};i["default"].use(L["a"]);var B=new L["a"].Store({state:W,mutations:{AddfirendMsg:function(t,e){void 0==t.friend[e.CurrentPacket.Data.FromUin]&&(t.friend[e.CurrentPacket.Data.FromUin]=new Array),t.friend[e.CurrentPacket.Data.FromUin].push(e),t.activate&&t.activate.$forceUpdate()},setActivate:function(t,e){console.log(e),t.activate=e}},actions:{},modules:{},getters:{allfriendMsg:function(t){return t.friend}}}),z=n("8c4f"),H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex",height:"100vh","flex-flow":"column",position:"relative"}},[n("div",{staticClass:"sol",staticStyle:{overflow:"auto",height:"calc(100vh - 200px)"}},[n("div",{staticClass:"m-message"},[n("ul",t._l(t.$store.state.friend[t.$route.params.id],(function(e,r){return n("li",{key:r},[n("div",{staticClass:"m-main"},[n("img",{staticClass:"avatar",attrs:{width:"50",height:"50",src:"http://q.qlogo.cn/headimg_dl?dst_uin="+t.$route.params.id+"&spec=640"}}),"TextMsg"==e.CurrentPacket.Data.MsgType?n("div",{staticClass:"text"},[t._v(" "+t._s(e.CurrentPacket.Data.Content)+" ")]):"PicMsg"==e.CurrentPacket.Data.MsgType?n("img",{staticClass:"text",staticStyle:{"background-color":"#fff","max-width":"200px",padding:"0"},attrs:{src:JSON.parse(e.CurrentPacket.Data.Content).Url}}):"VoiceMsg"==e.CurrentPacket.Data.MsgType?n("div",{staticClass:"text",staticStyle:{"background-color":"#fff",padding:"0"}},[n("div",[n("mAudio",{attrs:{url:JSON.parse(e.CurrentPacket.Data.Content).Url}})],1)]):n("div",{staticClass:"text"},[t._v(" [消息类型暂时不支持,会支不支持也不一定] ")])])])})),0)])]),n("div",{staticStyle:{"text-align":"left"},attrs:{id:"edit"}}),n("div",{staticStyle:{bottom:"10px",right:"10px",position:"absolute"}},[n("el-button",{staticStyle:{"z-index":"100001"},attrs:{type:"primary"},on:{click:t.click}},[t._v("发送")])],1)])},Q=[],K=(n("ac1f"),n("1276"),n("2ca0"),n("9fc2")),X=n.n(K),Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("audio",{staticStyle:{display:"block"},attrs:{controls:"",src:t.base64}})])},Z=[],tt={data:function(){return{base64:""}},props:{url:{type:String,default:""}},mounted:function(){console.log(this.url),this.getVoice(this.url)},methods:{getVoice:function(t){var e=this;w()({url:t,responseType:"blob"}).then((function(t){var n=new FormData;n.append("file",new File([t.data],"a.silk")),console.log(t),w()({method:"post",data:n,headers:{"Content-Type":"multipart/form-data"},url:"http://silk2mp3.wlphp.com/api.php"}).then((function(t){return w()({url:t.data.url,responseType:"blob"}).then((function(t){var n=new FileReader;n.onload=function(t){return e.base64=t.target.result},n.readAsDataURL(t.data)}))}))}))}},name:"mAudio"},et=tt,nt=Object(A["a"])(et,Y,Z,!1,null,null,null),rt=nt.exports,at=n("49f2"),it=n.n(at),ot={name:"Home",components:{mAudio:rt},data:function(){return{edit:null}},mounted:function(){this.$store.commit("setActivate",this),this.edit=new it.a("#edit"),this.edit.customConfig.zIndex=0,this.edit.customConfig.uploadImgShowBase64=!0,this.edit.customConfig.menus=["emoticon","image"],this.edit.create()},methods:{click:function(){var t,e=X.a.load(this.edit.txt.html());if(null===(t=e("img")[0])||void 0===t?void 0:t.attribs["src"]){var n,r=null===(n=e("img")[0])||void 0===n?void 0:n.attribs["src"];U.sendMsg({toUser:parseInt(this.$route.params.id),sendToType:1,sendMsgType:"PicMsg",content:this.edit.txt.text().split("&nbsp;")[1],groupid:0,atUser:0,picUrl:r.startsWith("http")?r:"",picBase64Buf:r.startsWith("data")?r.split("data:image/jpeg;base64,")[1]:"",fileMd5:""})}else U.sendMsg({toUser:parseInt(this.$route.params.id),sendToType:1,sendMsgType:"TextMsg",content:this.edit.txt.text(),groupid:0,atUser:0,picUrl:"",fileMd5:""});this.edit.txt.html("")}}},st=ot,ct=(n("57b1"),Object(A["a"])(st,H,Q,!1,null,"f15fbe32",null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",{attrs:{for:""}},[t._v("ip")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.ip,expression:"ip"}],attrs:{type:"text"},domProps:{value:t.ip},on:{input:function(e){e.target.composing||(t.ip=e.target.value)}}}),n("br"),n("label",{attrs:{for:""}},[t._v("qq号")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.qq,expression:"qq"}],attrs:{type:"text"},domProps:{value:t.qq},on:{input:function(e){e.target.composing||(t.qq=e.target.value)}}}),n("button",{on:{click:t.click}},[t._v("确定")])])},pt=[],dt={data:function(){return{ip:"",qq:""}},methods:{click:function(){localStorage.setItem("config",JSON.stringify({ip:this.ip,qq:this.qq})),alert("请重启浏览器")}}},ft=dt,mt=Object(A["a"])(ft,lt,pt,!1,null,"2402399d",null),ht=mt.exports;i["default"].use(z["a"]);var gt=[{path:"/friend/:id",name:"friend",component:ut},{path:"/config",name:"config",component:ht},{path:"/friend",name:"friend",component:ut}],vt=new z["a"]({routes:gt}),bt=vt,yt=n("a3c5"),xt=n.n(yt);n("b9b6");i["default"].use(xt.a),i["default"].config.productionTip=!1,new i["default"]({router:bt,store:B,render:function(t){return t(V)}}).$mount("#app")}});
//# sourceMappingURL=app.506f4b52.js.map